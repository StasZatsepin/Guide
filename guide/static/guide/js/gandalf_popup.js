document.addEventListener('DOMContentLoaded', function() {
    const quotes = [
        { text: "Ты не пройдёшь!", sound: "/static/guide/sound/you_shall_not_pass.mp3" },
        { text: "Бегите, глупцы!", sound: "/static/guide/sound/go_you_fools.mp3" },
        { text: "Волшебник никогда не опаздывает и не приходит раньше времени. Он появляется именно тогда, когда считает нужным.", sound: "/static/guide/sound/wizard_never_late.mp3" },
        { text: "Даже самый маленький человек способен изменить ход будущего." },
        { text: "Я не скажу: не плачьте, ведь не все слёзы — зло." },
        "Всё, что нам нужно решить — что делать со временем, которое нам отпущено.",
        "Мир не в твоих книгах и картах. Он — там, снаружи.",
        "Храни это в тайне. Храни это в безопасности.",
        // Дополнительно
        "Есть только один Владыка Кольца, только он может подчинить его своей воле. И он не делится властью.",
        "Доска расставлена, фигуры движутся.",
        "Мужество теперь — твоя лучшая защита против надвигающейся бури.",
        "Смерть — это всего лишь ещё одна тропа, которую всем нам предстоит пройти.",
        "Путешествие на этом не заканчивается.",
        "Так бывает со всеми, кто живёт в такие времена, но не им решать.",
        "Многие, кто живёт, заслуживают смерти. А некоторые, кто умирает, заслуживают жизни.",
        "Я не помню этого места.",
        "У тебя только один выбор. Кольцо должно быть уничтожено.",
        "Не спеши раздавать смерть и судить других.",
        "Мудрые говорят только о том, что знают.",
        "Тот, кто разрушает вещь, чтобы узнать, что это такое, сошёл с пути мудрости.",
        "Я слуга Тайного Огня, владыка пламени Анора.",
        "Ты — носитель Кольца, Фродо. Нести Кольцо Власти — значит быть одному.",
        "Жалость Бильбо может решить судьбу многих.",
        "Мы должны присоединиться к нему, Гэндальф. Мы должны присоединиться к Саурону. Это было бы мудро, мой друг. — Скажи мне, 'друг', когда Саруман Мудрый отказался от разума ради безумия?",
        "Тебе придётся обойтись без носового платка и без многих других вещей, прежде чем ты дойдёшь до конца пути.",
        "Конец? Нет, путешествие на этом не заканчивается.",
        "Серый занавес этого мира отступает, и всё становится серебристым стеклом, а потом ты видишь это.",
        "Белые берега, и за ними — далёкая зелёная страна под стремительным восходом солнца.",
        "Волшебник никогда не опаздывает, Фродо Бэггинс. И не приходит раньше времени. Он появляется именно тогда, когда считает нужным.",
        "Я знал, что ты придёшь."
    ];
    function showGandalf() {
        const popup = document.getElementById('gandalf-popup');
        const quote = document.getElementById('gandalf-quote');
        const q = quotes[Math.floor(Math.random() * quotes.length)];
        quote.textContent = typeof q === 'string' ? q : q.text;
        popup.style.display = 'block';
        if (q.sound) {
            const audio = new Audio(q.sound);
            audio.play();
        }
        setTimeout(() => {
            popup.style.display = 'none';
            scheduleGandalf();
        }, 5000);
    }
    function scheduleGandalf() {
        const min = 20, max = 40;
        const delay = Math.random() * (max - min) + min;
        setTimeout(showGandalf, delay * 1000);
    }
    scheduleGandalf();
}); 